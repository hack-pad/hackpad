(this.webpackJsonphackpad=this.webpackJsonphackpad||[]).push([[0],{14:function(e,n,t){e.exports=t(34)},19:function(e,n,t){},20:function(e,n,t){},21:function(e,n,t){},24:function(e,n,t){},26:function(e,n,t){},32:function(e,n,t){},34:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(9),c=t.n(o),i=(t(19),t(7)),s=(t(20),t(21),t(22),t(23),t(24),t(10)),u=new(t.n(s).a)(window.navigator.userAgent),l="";window.navigator.vendor.match(/google/i)?l="Chrome":navigator.userAgent.match(/firefox\//i)&&(l="Firefox");var p=["Chrome","Firefox"],m=null===u.mobile()&&p.includes(l);function d(){return m?null:a.a.createElement("div",{className:"compat"},a.a.createElement("p",null,"Hackpad may not work reliably in your browser."),a.a.createElement("p",null,"If you're experience any issues, try a recent version of ",function(e){if(1===e.length)return e[0];if(2===e.length)return"".concat(e[0]," or ").concat(e[1]);var n=e.slice(0,e.length-1).join(", ");return"".concat(n,", or ").concat(e[e.length-1])}(p)," on a device with enough memory, like a PC."))}t(26);function f(e){var n=e.percentage;return a.a.createElement("div",{className:"app-loading"},a.a.createElement("div",{className:"app-loading-center"},a.a.createElement("div",{className:"app-loading-spinner"},void 0!==n?a.a.createElement("span",{className:"app-loading-percentage"},Math.round(n),"%"):null,a.a.createElement("span",{className:"fa fa-spin fa-circle-notch"})),a.a.createElement("p",null,"installing ",a.a.createElement("span",{className:"app-title"},a.a.createElement("span",{className:"app-title-hack"},"hack"),a.a.createElement("span",{className:"app-title-pad"},"pad"))),a.a.createElement("p",null,a.a.createElement("em",null,"please wait..."))))}var h=t(1),w=t.n(h),g=t(13),v=t(5),b=t(2);WebAssembly.instantiateStreaming||(WebAssembly.instantiateStreaming=function(){var e=Object(b.a)(w.a.mark((function e(n,t){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return e.next=4,e.sent.arrayBuffer();case 4:return r=e.sent,e.next=7,WebAssembly.instantiate(r,t);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}());var y=WebAssembly,x=(t(28),window.Go),k=0,E=[];function O(){return(O=Object(b.a)(w.a.mark((function e(){var n,t,r,a,o,c,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new Date).getTime(),t=new x,e.next=4,y.instantiateStreaming(fetch("wasm/main.wasm"),t.importObject);case 4:return r=e.sent,t.env={GOMODCACHE:"/home/me/.cache/go-mod",GOPROXY:"https://proxy.golang.org/",GOROOT:"/usr/local/go",HOME:"/home/me",PATH:"/bin:/home/me/go/bin:/usr/local/go/bin/js_wasm:/usr/local/go/pkg/tool/js_wasm"},t.run(r.instance),a=window,o=a.hackpad,c=a.fs,console.debug("hackpad status: ".concat(o.ready?"ready":"not ready")),i=D(c.mkdir),e.next=12,i("/bin",{mode:448});case 12:return e.next=14,o.overlayIndexedDB("/bin",{cache:!0});case 14:return e.next=16,o.overlayIndexedDB("/home/me");case 16:return e.next=18,i("/home/me/.cache",{recursive:!0,mode:448});case 18:return e.next=20,o.overlayIndexedDB("/home/me/.cache",{cache:!0});case 20:return e.next=22,i("/usr/local/go",{recursive:!0,mode:448});case 22:return e.next=24,o.overlayTarGzip("/usr/local/go","wasm/go.tar.gz",{persist:!0,skipCacheDirs:["/usr/local/go/bin/js_wasm","/usr/local/go/pkg/tool/js_wasm"],progress:function(e){k=e,E.forEach((function(n){return n(e)}))}});case 24:console.debug("Startup took",((new Date).getTime()-n)/1e3,"seconds");case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(){return O.apply(this,arguments)}();function C(e){return A.apply(this,arguments)}function A(){return(A=Object(b.a)(w.a.mark((function e(n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j;case 2:return e.abrupt("return",window.hackpad.install(n));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(b.a)(w.a.mark((function e(n){var t,r,a,o,c=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=c.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=c[a];return e.next=3,z({name:n,args:r});case 3:return o=e.sent,e.next=6,S(o.pid);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return T.apply(this,arguments)}function T(){return(T=Object(b.a)(w.a.mark((function e(n){var t,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j;case 2:return t=window,r=t.child_process,e.next=5,new Promise((function(e,t){r.wait(n,(function(n,r){n?t(n):e(r)}))}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return B.apply(this,arguments)}function B(){return(B=Object(b.a)(w.a.mark((function e(n){var t,r,a,o,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.name,r=n.args,a=Object(v.a)(n,["name","args"]),e.next=3,j;case 3:return o=window,c=o.child_process,e.next=6,new Promise((function(e,n){var o=c.spawn(t,r,a);o.error?n(new Error("Failed to spawn command: ".concat(t," ").concat(r.join(" "),": ").concat(o.error))):e(o)}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return new Promise((function(n,r){var a=[].concat(t);a.push((function(e){if(e)r(e);else{for(var t=arguments.length,a=new Array(t>1?t-1:0),o=1;o<t;o++)a[o-1]=arguments[o];n(a)}})),e.apply(void 0,Object(g.a)(a))}))}}var F=t(6),I=t.n(F);t(29),t(30),t(31);function M(e){var n=e.light,t=e.dark,r=function(e){e.matches?t():n()};W(r),r(P())}function P(){return window.matchMedia("(prefers-color-scheme: dark)")}var W=window.matchMedia?function(e){return P().addListener(e)}:function(){return!1};t(32);function _(e,n){var t=I()(e,{mode:"go",theme:"default",lineNumbers:!0,indentUnit:4,indentWithTabs:!0,viewportMargin:1/0});return M({light:function(){return t.setOption("theme","default")},dark:function(){return t.setOption("theme","material-darker")}}),t.on("change",n),e.addEventListener("click",(function(n){t.focus(),n.target===e&&t.setCursor({line:t.lineCount()-1})})),{getContents:function(){return t.getValue()},setContents:function(e){t.setValue(e)},getCursorIndex:function(){return t.getCursor().ch},setCursorIndex:function(e){t.setCursor({ch:e})}}}t(33);var G=t(11),H=t(12);function L(e){var n=new H.FitAddon,t=new G.Terminal({});t.loadAddon(n);var r="rgb(33, 33, 33)";M({light:function(){return t.setOption("theme",{background:"white",foreground:r,cursor:r})},dark:function(){return t.setOption("theme",{background:r,foreground:"white",cursor:"white"})}}),t.open(e),t.setOption("cursorBlink",!0),t.focus();var a=function(){var r=parseFloat(getComputedStyle(e).fontSize);t.setOption("fontSize",.85*r),n.fit()};if(a(),window.ResizeObserver){var o=e.parentNode,c=new ResizeObserver((function(){e.parentNode?e.classList.contains("active")&&a():c.unobserve(o)}));c.observe(o)}else window.addEventListener("resize",a);return t}var R=function(){var e=a.a.useState(0),n=Object(i.a)(e,2),t=n[0],r=n[1],o=a.a.useState(!0),c=Object(i.a)(o,2),s=c[0],u=c[1];return a.a.useEffect((function(){var e;e=r,E.push(e),e(k),window.editor={newTerminal:L,newEditor:_},Promise.all([C("editor"),C("sh")]).then((function(){!function(e){N.apply(this,arguments)}("editor","--editor=editor"),u(!1)}))}),[u,r]),a.a.createElement(a.a.Fragment,null,s?a.a.createElement(a.a.Fragment,null,a.a.createElement(d,null),a.a.createElement(f,{percentage:t})):null,a.a.createElement("div",{id:"app"},a.a.createElement("div",{id:"editor"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.5c913b54.chunk.js.map